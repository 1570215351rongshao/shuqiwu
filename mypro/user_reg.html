<!docdype html>
<html>
<head>
<title>我的其</title>
<meta charset="utf-8">
</head>
<body>
	姓名：<input type="text" name="uname" onblur=an()><br>
				<input type="hidden" name="hname">
	密码：<input type="text" name="upwd"><br>
	密码：<input type="text" name="cpwd"><br>
	姓名：<input type="text" name="user_name"><br>
	手机：<input type="text" name="phone"><br>
	邮箱：<input type="text" name="email"><br>
	性别：<input id="m" type="radio" name="gender" value="1">
			<label for="m">男</label>
			  <input id="n" type="radio" name="gender" value="0">
			  <label for="n">女</label>
			  <button onclick="reg()">注册</button>
			  <script>
				/*验证姓名是否存在*/
				function an(){
					if (!uname.value)
					{
						alert("姓名不能为空");
						return;
					}
					if (hname.value!=uname.value)
					{
						alert("1");
					}else{
						alert("0");
					}
					/*xhr四步*/
					var xhr=new XMLHttpRequest();
					xhr.onreadystatechange=function(){
						if (xhr.readyStaet===4 && xhr.status===200)
						{
							var result=xhr.responseText;
							if (result="1")
							{
								alert("可以注册")
							}else if (result="0")
							{
								alert("已有用户");
							}
						}
					}
				}

				function reg(){  
					
					/*判断不能为空*/
					
					if (!upwd.value)
					{
						alert("密码不能为空");
						return;
					}
					if (cpwd==upwd)
					{
                        alert("密码不一致");
						return;
					}
					if (!phone.value)
					{
						alert("手机不能为空");
						return;
					}
					if (!email.value)
					{
						alert("邮箱不能为空");
						return;
					}
					/*xhr四步*/
					var xhr=new XMLHttpRequest();
					xhr.onreadystatechange=function(){
						if (xhr.readyState===4 && shr.status===200)
						{
							var result=xhr.responseText;
							if (result="1")
							{
								alert("成功");
								
							}else{
							    alert("失败");
							
							}
						}
					}
				    xhr.open("post","/mypro/v1/user_reg",true)
					/*设置请求头信息*/
					xhr.setRequestHeader="Content-Type","application/-x-www-form-urlecoded";
                    var formdata="uname="+uname.value+"&upwd="+upwd.value+"&cpwd="+cpwd.value+"&phone="+phone.value+"&user_name="+user_name.value+"&email="+email.value+"&gender="+(m.checked ? m.value : n.value);
					xhr.send(formdata);
				}
			  </script>
</body>
</html>